{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificados</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        * {
            background-color: #f0f8ff; /* Cambia a un fondo más claro */
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
        }
        .entry-title {
        text-align: left; /* Alinear el texto a la izquierda */
        }
        #institution {
            color: #2c3e50; /* Cambia el color del texto */
            text-align: center;
            padding-top: 5%;
        }

        /* Estilo para el contenedor del formulario */
        #searchForm {
            display: flex; /* Usar flexbox para alinear elementos en una línea */
            justify-content: flex-end; /* Alinear a la derecha */
            margin: 20px; /* Espacio alrededor del formulario */
        }

        #searchInput {
            background-color: #e8f0fe; /* Cambia el color del campo de búsqueda */
            padding: 10px;
            border: 1px solid #ccc; /* Añade un borde */
            border-radius: 5px; /* Bordes redondeados */
            width: 200px; /* Ancho del campo de búsqueda */
            margin-right: 10px; /* Espacio entre el campo de búsqueda y los botones */
        }

        #resultsList {
            margin: 20px auto;
            width: 80%; /* Ajusta el ancho de los resultados */
            color: #2980b9; /* Cambia el color del texto de resultados */
            text-align: center;
            text-transform: uppercase;
        }

        table {
            width: 100%; /* Ancho completo para la tabla */
            border-collapse: collapse; /* Colapsar bordes */
            margin-top: 10px; /* Espacio entre el resumen y la tabla */
        }

        th, td {
            padding: 8px; /* Espaciado interior en celdas */
            text-align: left; /* Alinear texto a la izquierda */
            border-bottom: 1px solid #ddd; /* Borde inferior para las filas */
        }

        th {
            background-color: #3498db; /* Color de fondo del encabezado */
            color: white; /* Color del texto del encabezado */
        }

        tr:hover {
            background-color: #f1f1f1; /* Color de fondo al pasar el mouse sobre la fila */
        }

        #Elimina, #Limpiar {
            background-color: #e74c3c; /* Cambia el color de fondo de los botones */
            color: white; /* Cambia el color del texto */
            padding: 10px 20px; /* Aumenta el espaciado interior */
            border-radius: 5px; /* Bordes redondeados */
            cursor: pointer; /* Cambia el cursor a puntero cuando se pasa sobre el botón */
        }

        #Elimina:hover, #Limpiar:hover {
            background-color: #c0392b; /* Color más oscuro al pasar el mouse */
        }

        details {
            margin-bottom: 15px; /* Espacio entre los detalles */
        }
    </style>
</head>
<body>

<div id="institution">

    <img id="logo" src="{% static 'logo_2024.png' %}" alt="logo_2024">

    <h1 class="entry-title" itemprop="headline" style="text-align: left;">Certificados</h1>

    <p>Valida <strong>curso </strong>o<strong> capacitación</strong> en el siguiente apartado <em>(Busca por nombres, apellidos, número de cédula, nombre del curso o por código de verificación)</em></p>
</div>

<div>
    <form method="GET" action="" id="searchForm">
        <input type="text" name="q" id="searchInput" placeholder="buscar..." autocomplete="off">
        <input type="button" id="Elimina" value="Elimina">
        <input type="button" id="Limpiar" value="Limpiar">        
    </form>
</div>

<div id="resultsList"></div>

<script>
    $(document).ready(function() {
        $('#searchInput').on('keyup', function() {
            var query = $(this).val();
            $.ajax({
                url: '',
                data: {
                    'q': query
                },
                dataType: 'json',
                success: function(data) {
                    $('#resultsList').empty();
                    if (data.results.length > 0) {
                        $.each(data.results, function(index, certificate) {
                            $('#resultsList').append(
                                '<details><summary>' + certificate.national_id + ' - ' + certificate.holder_first_name + ' - ' + certificate.holder_last_name +  '</summary><p>' +
                                '<div id="list">' +   
                                '<table>' +
                                '<tr><td>National id</td><td>' + certificate.national_id + '</td></tr>' +
                                '<tr><td>Name</td><td>' + certificate.holder_first_name + ' ' + certificate.holder_last_name + '</td></tr>' +
                                '<tr><td>Institution</td><td>' + certificate.institution + '</td></tr>' +
                                '<tr><td>Start Date</td><td>' + certificate.start_date + '</td></tr>' +
                                '<tr><td>End Date</td><td>' + certificate.end_date + '</td></tr>' +
                                '<tr><td>Hours</td><td>' + certificate.hours + '</td></tr>' +
                                '<tr><td>Certificate code</td><td>' + certificate.certificate_code + '</td></tr>' +
                                '</table>' +
                                '</p></details><br>'
                            );
                        });
                    } else {
                        $('#resultsList').append('<p>No results found</p>');
                    }
                }
            });
        });
    });
    </script>

</body>
</html>